# Task Manager API (MongoDB Version)

## Overview
This version of the Task Management API uses **MongoDB** for persistent storage via the official MongoDB Go Driver.

**Key Change**: The Task ID is now a 24-character **Hexadecimal ObjectID** generated by MongoDB, replacing the previous simple integer ID.

## Prerequisites
1. **MongoDB Instance**: Ensure a MongoDB server is running, accessible at `mongodb://localhost:27017`.
2. **Go Dependencies**: Must run `go mod tidy` after updating `go.mod`.

## Configuration
The application is hardcoded to connect to:
* **URI**: `mongodb://localhost:27017`
* **Database**: `taskdb`
* **Collection**: `tasks`

## Endpoints

| Method | Path | Description |
| :--- | :--- | :--- |
| `GET` | `/api/v1/tasks` | Retrieve all tasks. |
| `GET` | `/api/v1/tasks/{id}` | Retrieve a single task by its MongoDB ObjectID. |
| `POST` | `/api/v1/tasks` | Create a new task. |
| `PUT` | `/api/v1/tasks/{id}` | Update an existing task by its MongoDB ObjectID. |
| `DELETE` | `/api/v1/tasks/{id}` | Delete a task by its MongoDB ObjectID. |

## Data Model (JSON)

| Field | Type | Description | Required | Notes |
| :--- | :--- | :--- | :--- | :--- |
| `id` | string | MongoDB ObjectID (24 hex characters) | No (Server sets) | **Read-only** on POST. Used for GET/PUT/DELETE. |
| `title` | string | Title of the task. | Yes | |
| `description` | string | Description of the task. | No | |
| `due_date` | string | Target completion date (e.g., "2025-12-31"). | No | |
| `status` | string | Task status (e.g., "pending", "in-progress", "completed"). | Yes | |

### Example Request Body (POST /api/v1/tasks)

```json
{
  "title": "Finish Task-6 MongoDB Integration",
  "description": "Replace in-memory store with MongoDB CRUD operations.",
  "due_date": "2025-12-10",
  "status": "in-progress"
}
```

### Example Response Body (GET /api/v1/tasks/{id})

```json
{
  "id": "65b9a7c30f40d21e847b2c0f",
  "title": "Finish Task-6 MongoDB Integration",
  "description": "Replace in-memory store with MongoDB CRUD operations.",
  "due_date": "2025-12-10",
  "status": "in-progress"
}
```

## Quick Run / Testing

1.  **Start MongoDB** (e.g., using `mongod` command or Docker).
2.  **Install/Update Dependencies**:

    ```bash
    go mod tidy
    ```

3.  **Run the API Server**:

    ```bash
    go run main.go
    ```

4.  **Test Endpoints** (example with `curl`):

    * **Create Task (POST)**:
        ```bash
        curl -X POST http://localhost:8080/api/v1/tasks         -H "Content-Type: application/json"         -d '{"title":"Test Mongo","status":"pending"}'
        # Note the ID from the response (e.g., 65b9a7c30f40d21e847b2c0f)
        ```
    * **Get All Tasks (GET)**:
        ```bash
        curl http://localhost:8080/api/v1/tasks
        ```
    * **Get Task by ID (GET)** (Replace YOUR_TASK_ID):
        ```bash
        curl http://localhost:8080/api/v1/tasks/YOUR_TASK_ID
        ```
    * **Update Task (PUT)** (Replace YOUR_TASK_ID):
        ```bash
        curl -X PUT http://localhost:8080/api/v1/tasks/YOUR_TASK_ID         -H "Content-Type: application/json"         -d '{"title":"Test Mongo Updated","status":"completed","description":"Done!"}'
        ```
    * **Delete Task (DELETE)** (Replace YOUR_TASK_ID):
        ```bash
        curl -X DELETE http://localhost:8080/api/v1/tasks/YOUR_TASK_ID
        ```
